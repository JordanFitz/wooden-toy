window.guru||(window.guru={}),guru.shapes||(guru.shapes={}),guru.error||(guru.error=function(a){console.log("%c ERROR %c %s","background-color: red; color: white;","background-color: transparent; color: inherit;",a)}),guru.warn||(guru.warn=function(a){console.log("%c WARN %c %s","background-color: gold; color: black;","background-color: transparent; color: inherit;",a)}),guru.success||(guru.success=function(a){console.log("%c SUCCESS %c %s","background-color: green; color: white;","background-color: transparent; color: inherit;",a)}),guru.log||(guru.log=function(a){console.log("%c LOG %c %s","background-color: #1c1c1c; color: white;","background-color: transparent; color: inherit;",a)}),guru.getJSON||(guru.getJSON=function(a,b,c){var d=new XMLHttpRequest;d.open("get",a,!0),d.responseType="json",d.onload=function(){200===d.status?b(d.response):c(d.status)},d.send()}),guru.createID||(guru.createID=function(){return Math.random().toString(36).substr(2,9)}),guru.random||(guru.random=function(a,b,c){var d=Math.floor(Math.random()*(b-a+1)+a),e=1;return c&&(e=0===Math.round(Math.random())?-1:1),d*=e}),guru.randomDecimal||(guru.randomDecimal=function(a){var b=1;return a&&(b=0===Math.round(Math.random())?-1:1),Math.random()*b}),guru.createLoop||(guru.createLoop=function(a){function b(){a(),window.requestAnimationFrame(b)}window.requestAnimationFrame(b)}),guru.loadTheme||(guru.loadTheme=function(a){var b=document.createElement("link");b.id=this._id,b.rel="stylesheet",b.type="text/css",b.media="all",b.href=a,document.getElementsByTagName("head")[0].appendChild(b)}),guru.Color||(guru.Color=function(a,b,c,d){3===arguments.length||4===arguments.length?(this._r=a,this._g=b,this._b=c,this._a=255,4===arguments.length&&(this._a=d)):(this._r=0,this._g=0,this._b=0,this._a=255),this._css="rgba("+this._r+", "+this._g+", "+this._b+", "+this._a+")"},guru.Color.prototype.getRGB=function(){return{r:this._r,g:this._g,b:this._b,a:this._a}},guru.Color.prototype.setRGB=function(a,b,c,d){return d||(d=255),this._r=a,this._g=b,this._b=c,this._a=d,this._css="rgba("+this._r+", "+this._g+", "+this._b+", "+this._a+")",this},guru.Color.prototype.fromHex=function(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c&&(this._r=parseInt(c[1],16),this._g=parseInt(c[2],16),this._b=parseInt(c[3],16),this._a=255,this._css="rgba("+this._r+", "+this._g+", "+this._b+", "+this._a+")"),this}),guru.shapes.Polygon||(guru.shapes.Polygon=function(){this._color=new guru.Color,this._vertices=[],this.vertexCount=0},guru.shapes.Polygon.prototype.setColor=function(a){return this._color=a,this},guru.shapes.Polygon.prototype.addVertex=function(a,b){return this._vertices.push([a,b]),this.vertexCount=this._vertices.length,this},guru.shapes.Polygon.prototype.move=function(a,b){for(var c=this._vertices.length-1;c>=0;c--)this._vertices[c][0]+=a,this._vertices[c][1]+=b},guru.shapes.Polygon.prototype.moveVertex=function(a,b,c){this._vertices[a][0]+=b,this._vertices[a][1]+=c},guru.shapes.Polygon.prototype.render=function(a){var b=a.fillStyle;a.fillStyle=this._color._css,a.beginPath();for(var c=this._vertices.length-1;c>=0;c--){var d=this._vertices[c];c===this._vertices.length-1?a.moveTo(d[0],d[1]):a.lineTo(d[0],d[1])}return a.closePath(),a.fill(),a.fillStyle=b,this}),guru.shapes.Rectangle||(guru.shapes.Rectangle=function(a,b,c,d){this._x=a,this._y=b,this._width=c,this._height=d,this._color=new guru.Color},guru.shapes.Rectangle.prototype.setColor=function(a){return this._color=a,this},guru.shapes.Rectangle.prototype.getPosition=function(){return{x:this._x,y:this._y}},guru.shapes.Rectangle.prototype.move=function(a,b){return this._x+=a,this._y+=b,this},guru.shapes.Rectangle.prototype.render=function(a){var b=a.fillStyle;return a.fillStyle=this._color._css,a.fillRect(this._x,this._y,this._width,this._height),a.fillStyle=b,this}),guru.shapes.Circle||(guru.shapes.Circle=function(a,b,c){this._x=a,this._y=b,this._radius=c,this._color=new guru.Color},guru.shapes.Circle.prototype.setColor=function(a){return this._color=a,this},guru.shapes.Circle.prototype.getPosition=function(){return{x:this._x,y:this._y}},guru.shapes.Circle.prototype.move=function(a,b){return this._x+=a,this._y+=b,this},guru.shapes.Circle.prototype.render=function(a){var b=a.fillStyle;return a.fillStyle=this._color._css,a.beginPath(),a.arc(this._x,this._y,this._radius,0,2*Math.PI,!0),a.fill(),a.closePath(),a.fillStyle=b,this}),guru.TextureManager||(guru.TextureManager=function(){this._textures={},this.onCompleted=function(){}},guru.TextureManager.prototype.addTexture=function(a,b){if(this._textures.hasOwnProperty(a))return guru.error('[addTexture] A texture with the ID "'+a+'" is already registered within the TextureManager.'),this;var c=new Image;c.src=b,c.loaded=!1;var d=this;return c.onload=function(){c.loaded=!0,d.completed()&&d.onCompleted()},this._textures[a]=c,this},guru.TextureManager.prototype.getTexture=function(a){return this._textures.hasOwnProperty(a)?(this._textures[a].loaded||guru.warn('[getTexture] Texture "'+a+'" has not finished loading.'),this._textures[a]):(guru.error('[getTexture] Texture "'+a+'" is not registered within the TextureManager.'),null)},guru.TextureManager.prototype.completed=function(){for(var a in this._textures)if(this._textures.hasOwnProperty(a)){var b=this._textures[a];if(!b.loaded)return!1}return!0}),guru.Text||(guru.Text=function(a,b,c,d,e,f){this._text=a,this._x=b,this._y=c,this._font=d,this._size=e,this._color=f,this._centerVertical=!1,this._centerHorizontal=!1},guru.Text.prototype.setCentered=function(a,b){return this._centerVertical=a,this._centerHorizontal=b,this},guru.Text.prototype.setText=function(a){return this._text=a,this},guru.Text.prototype.render=function(a){var b=a.textBaseline,c=a.textTextAlign,d=a.fillStyle,e=a.font;return a.textBaseline=this._centerVertical?"middle":"top",a.textAlign=this._centerHorizontal?"center":"left",a.fillStyle=this._color._css,a.font=this._size+'px "'+this._font+'"',a.fillText(this._text,this._x,this._y),a.textBaseline=b,a.textAlign=c,a.fillStyle=d,a.font=e,this}),guru.Sprite||(guru.Sprite=function(a,b,c,d){this._x=a,this._y=b,this._width=c,this._height=d,this._cropping={x:0,y:0,width:c,height:d},this._color=new guru.Color,this._texture=null,this._interval=-1,this._frames=[],this._frame=0,this._frames.push(this._cropping)},guru.Sprite.prototype.move=function(a,b){return this._x+=a,this._y+=b,this},guru.Sprite.prototype.setColor=function(a){return this._color=a,this},guru.Sprite.prototype.setTexture=function(a){return this._texture=a,this},guru.Sprite.prototype.setCropping=function(a){return this._cropping=a,this},guru.Sprite.prototype.addFrame=function(a){return this._frames.push(a),this},guru.Sprite.prototype.render=function(a){if(this._texture){var b=this._frames[this._frame];a.drawImage(this._texture,b.x,b.y,b.width,b.height,this._x,this._y,this._width,this._height)}else{var c=a.fillStyle;a.fillStyle=this._color._css,a.fillRect(this._x,this._y,this._width,this._height),a.fillStyle=c}return this},guru.Sprite.prototype.incrementAnimation=function(){return this.setCropping(this._frames[this._frame]),this._frame<this._frames.length&&this._frame++,this._frame===this._frames.length&&(this._frame=0),this},guru.Sprite.prototype.stopAnimation=function(){return clearInterval(this._interval),this._interval=-1,this},guru.Sprite.prototype.startAnimation=function(a){var b=this;return this._interval=setInterval(function(){b.incrementAnimation(this)},a||150),this},guru.Sprite.prototype.loadAnimation=function(a,b){b||(b=function(b){guru.error('Could not load animation from "'+a+'": '+b+".")});var c=function(b){b.frames?(this._frames=b.frames,0===this._frames.length&&this._frames.push(this._cropping)):guru.warn('Animation "'+a+'" did not contain an array of frames.')};return guru.getJSON(a,c,b),this}),guru.GUIManager||(guru.GUIManager=function(a){this._elements=[],this._container=document.createElement("div"),this._inner=document.createElement("div"),this._id="_"+(a||guru.createID()),this._container.id="guru-gui-container"+this._id,this._container.style["z-index"]="999",this._inner.id="guru-gui-inner"+this._id,this._inner.style.position="relative",this._inner.style.height="100%",this._inner.style.width="100%",this._inner.className="guru-gui-inner",this._container.appendChild(this._inner),document.body.appendChild(this._container)},guru.GUIManager.prototype.addElement=function(a){return this._inner.appendChild(a._element),this},guru.GUIManager.prototype.loadTheme=function(a){var b=document.createElement("style");return/firefox/.test(navigator.userAgent.toLowerCase())||guru.warn('Scoped styles are not supported in your browser, this theme will be applied to the entire document. (loadTheme: "'+a+'")'),b.id=this._id,b.type="text/css",b.setAttribute("scoped",""),b.appendChild(document.createTextNode("@import url('"+a+"');")),this._container.appendChild(b),this}),guru.GUIElement||(guru.GUIElement=function(a,b,c){this._type=a||"button",this._value=b||"",this._id=c||guru.createID(),this._element=document.createElement("input"),this._element.type=this._type,this._element.value=this._value,this._element.id=this._id,this._element.className="guru-gui-element",this.onclick=function(){};var d=this;this._element.onclick=function(a){d.onclick(a)}},guru.GUIElement.prototype.center=function(){return this._innerElement=this._element,this._element=document.createElement("div"),this._element.id=this._id,this._element.style.width="100%",this._element.style["box-sizing"]="border-box",this._element.style.display="block",this._element.style.textAlign="center",this._innerElement.style.display="inline-block",this._element.appendChild(this._innerElement),this},guru.GUIElement.prototype.setPlaceholder=function(a){return this._innerElement?this._innerElement.placeholder=a:this._element.placeholder=a,this},guru.GUIElement.prototype.applyStyle=function(a,b){return"Number"==typeof b&&(b=b.toString()+"px"),this._innerElement?this._innerElement.style[a]=b:this._element.style[a]=b,this},guru.GUIElement.prototype.setPosition=function(a,b){return this._innerElement?(this._innerElement.style.position="absolute",this._innerElement.style.top=(b||0).toString()+"px",this._innerElement.style.left=(a||0).toString()+"px"):(this._element.style.position="absolute",this._element.style.top=b.toString()+"px",this._element.style.left=a.toString()+"px"),this},guru.GUIElement.prototype.setOnclick=function(a){return this.onclick=a,this},guru.GUIElement.prototype.setValue=function(a){return this._value=a||"",this._innerElement?this._innerElement.value=this._value:this._element.value=this._value,this}),guru.GUILabel||(guru.GUILabel=function(a,b){this._value=a||"",this._id=b||guru.createID(),this._element=document.createElement("span"),this._element.appendChild(document.createTextNode(this._value)),this._element.id=this._id,this._element.className="guru-gui-label",this.onclick=function(){};var c=this;this._element.onclick=function(a){c.onclick(a)}},guru.GUILabel.prototype.center=function(){return this._innerElement=this._element,this._element=document.createElement("div"),this._element.id=this._id,this._element.style.width="100%",this._element.style["box-sizing"]="border-box",this._element.style.display="block",this._element.style.textAlign="center",this._innerElement.style.display="inline-block",this._element.appendChild(this._innerElement),this},guru.GUILabel.prototype.setPlaceholder=function(a){return this._innerElement?this._innerElement.placeholder=a:this._element.placeholder=a,this},guru.GUILabel.prototype.applyStyle=function(a,b){return"Number"==typeof b&&(b=b.toString()+"px"),this._innerElement?this._innerElement.style[a]=b:this._element.style[a]=b,this},guru.GUILabel.prototype.setPosition=function(a,b){return this._element.style.position="absolute",this._element.style.top=b.toString()+"px",this._element.style.left=a.toString()+"px",this},guru.GUILabel.prototype.setOnclick=function(a){return this.onclick=a,this},guru.GUILabel.prototype.setValue=function(a){this._value=a||"",this._innerElement?this._innerElement.innerHTML=this._value:this._element.innerHTML=this._value}),guru.Canvas||(guru.Canvas=function(a,b){if(this._guiManager=null,this._element=document.querySelectorAll(a)[0],this._context=this._element.getContext("2d"),b&&(b.width&&(this._element.width=b.width),b.height&&(this._element.height=b.height),b.fullscreen)){this._element.width=window.innerWidth,this._element.height=window.innerHeight;var c=function(){};window.onresize&&(c=window.onresize);var d=this;window.onresize=function(){c(),b.noResize||(d._element.width=window.innerWidth,d._element.height=window.innerHeight,d.width=d._element.width,d.height=d._element.height)},b.css&&(document.body.style.margin="0",this._element.style.display="inline-block",this._element.style["float"]="left")}this.width=this._element.width,this.height=this._element.height},guru.Canvas.prototype.clear=function(a){return a&&a._css?(this._context.fillStyle=a._css,this._context.fillRect(0,0,this.width,this.height),this):(this._context.clearRect(0,0,this.width,this.height),this)},guru.Canvas.prototype.render=function(a){return a.render(this._context),this},guru.Canvas.prototype.setGUIManager=function(a){return this._guiManager=a,this._guiManager._container.style.position="absolute",this._guiManager._container.style.top=this._element.getBoundingClientRect().top.toString()+"px",this._guiManager._container.style.left=this._element.getBoundingClientRect().left.toString()+"px",this._guiManager._container.style.width=this.width.toString()+"px",this._guiManager._container.style.height=this.height.toString()+"px",this});